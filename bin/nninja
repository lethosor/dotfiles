#!/bin/sh
# ninja + notification
ninja "$@"
code=$?
[ "$code" = 0 ] && codemsg=succeeded || codemsg=failed
group="ninja.$(basename $(git rev-parse --show-toplevel))"
message="ninja: $(basename $(git rev-parse --show-toplevel)) $codemsg [$*]"
if type terminal-notifier >/dev/null 2>&1; then
    terminal-notifier -message "$message" -group "$group" -activate com.apple.Terminal >/dev/null
elif type notify-send >/dev/null 2>&1; then
    notify-send "$message" --icon terminal --category "$group" --expire-time 10
fi
